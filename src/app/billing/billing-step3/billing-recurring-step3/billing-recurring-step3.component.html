<div class="billingModelContainer">
  <form #f="ngForm" (ngSubmit)="f.valid && onSubmit(f)">
    <div class="bmr-main flex-center-center">
      <div class="billingBoxCont">
        <div class="row">
          <div class="col-xs-12 col-sm-8 col-md-8">
            <label>Amount</label>
            <div class="row SingleRecurringClass">
              <div class="col-xs-12 col-sm-3 col-md-3 amountselect">
                <select
                  name="rupees"
                  [(ngModel)]="model.rupees"
                  #rupees="ngModel"
                  required
                  [ngClass]="{ 'is-invalid': f.submitted && rupees.errors?.required }"
                >
                  <option *ngFor="let item of selectOption" [selected]="item.value === 0" [ngValue]="item.label"
                    >{{ item.name }} {{ item.label }}
                  </option>
                </select>
              </div>
              <div class="col-xs-12 col-sm-6 col-md-6 amountinput">
                <input
                  class="input"
                  oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                  id="amount"
                  placeholder="$ 0.00"
                  name="amount"
                  [(ngModel)]="model.amount"
                  required
                  #amountentry="ngModel"
                  [ngClass]="{ 'is-invalid': (f.submitted && amountentry.errors?.required) || amountentry.errors?.gt }"
                  [gt]="0"
                  maxlength="17"
                />
                <div *ngIf="f.submitted">
                  <div class="notifyMsg" [hidden]="!amountentry.errors?.required">Amount is required</div>
                </div>
                <div class="notifyMsg" *ngIf="amountentry.errors?.gt">Needs to be more than 0</div>
              </div>
            </div>
            <div class="row ">
              <div class="col-xs-12 col-sm-12 col-md-12">
                <span class="BillingCycleClass">Billing Cycle</span> <br />
                <label>Customers will be billed every</label>
                <div class="row SingleRecurringClass">
                  <div class="col-xs-12 col-sm-3 col-md-3">
                    <input
                      class="col-xs-12 col-sm-11 col-md-11"
                      oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                      placeholder="0"
                      type="number"
                      name="No1"
                      [(ngModel)]="model.No1"
                      onkeypress="return event.charCode >= 48 && event.charCode <= 57"
                      appBlockCopyPaste
                      required
                      #NoOfRecuurence1="ngModel"
                      (input)="handlechangedays()"
                      [ngClass]="{
                        'is-invalid': (f.submitted && NoOfRecuurence1.errors?.required) || NoOfRecuurence1.errors?.min
                      }"
                      [min]="1"
                      min="1"
                    />
                  </div>
                  <div class="col-xs-12 col-sm-6 col-md-6 dayselect">
                    <select
                      name="Period1"
                      [(ngModel)]="model.Period1"
                      #Period1="ngModel"
                      (change)="handlechangecalculate(Period1)"
                      [ngClass]="{
                        'is-invalid': (f.submitted && NoOfRecuurence1.errors?.required) || NoOfRecuurence1.errors?.min
                      }"
                    >
                      <option *ngFor="let option of recurrenceOption" [ngValue]="option.label"
                        >{{ option.label }}
                      </option>
                    </select>
                    <div *ngIf="f.submitted">
                      <div class="notifyMsg" [hidden]="!NoOfRecuurence1.errors?.required">Days is required</div>
                    </div>
                    <div class="notifyMsg" *ngIf="NoOfRecuurence1.errors?.min">Needs to last at least 1 day</div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row ">
              <div class="col-xs-12 col-sm-12 col-md-12">
                <span class="BillingCycleClass">Recurrences</span> <br />
                <label>Number of billing cycles</label>
                <div class="row SingleRecurringClass">
                  <div class="col-xs-12 col-sm-3 col-md-3">
                    <input
                      class="col-xs-12 col-sm-11 col-md-11"
                      [disabled]="indefinite"
                      oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                      placeholder="0"
                      type="number"
                      name="No2"
                      [(ngModel)]="model.No2"
                      required
                      #NoOfRecuurence2="ngModel"
                      [ngClass]="{
                        'is-invalid': (f.submitted && NoOfRecuurence2.errors?.required) || NoOfRecuurence2.errors?.min
                      }"
                      [min]="2"
                      min="2"
                      onkeypress="return event.charCode >= 48 && event.charCode <= 57"
                      appBlockCopyPaste
                    />
                    <div *ngIf="f.submitted">
                      <div class="errorMSg" [hidden]="!NoOfRecuurence2.errors?.required">Subscriptions is required</div>
                    </div>
                    <div class="errorMSg" *ngIf="NoOfRecuurence2.errors?.min">Need to be more than 1</div>
                  </div>
                  <div>
                    <label class="container"
                      >Indefinite
                      <input
                        type="checkbox"
                        name="checkbox"
                        [(ngModel)]="indefinite"
                        (click)="checkbox()"
                        #Indef="ngModel"
                      />
                      <span type="checkbox" class="checkmark"></span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
            <div class="row ">
              <div class="col-xs-12 col-sm-12 col-md-12">
                <span class="BillingCycleClass">Trial period</span> <br />
                <label>Offer your customers a trial before they start paying you</label>
                <div class="row SingleRecurringClass">
                  <div class="col-xs-12 col-sm-3 col-md-3">
                    <label class="switch">
                      <input
                        type="checkbox"
                        name="Toggle"
                        [(ngModel)]="model.Toggle"
                        (change)="handlechangetrial(Toggle)"
                        #Toggle="ngModel"
                      />
                      <span class="slider round"></span>
                    </label>
                    <!--
                      <div *ngIf="f.submitted">
                        <div class="notifyMsg" [hidden]="!Toggle.errors?.required">Trial period is required!</div>
                      </div>
                    -->
                  </div>
                </div>
              </div>
            </div>
            <div class="row " *ngIf="model.Toggle">
              <div class="col-xs-12 col-sm-12 col-md-12">
                <label>Start subscription billing after</label>
                <div class="row SingleRecurringClass">
                  <div class="col-xs-12 col-sm-3 col-md-3">
                    <input
                      class="col-xs-12 col-sm-11 col-md-11"
                      oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                      placeholder="0"
                      type="number"
                      name="NoOfRecuurence3"
                      [(ngModel)]="model.NoOfRecuurence3"
                      (input)="handlechangetraildays()"
                      onkeypress="return event.charCode >= 48 && event.charCode <= 57"
                      appBlockCopyPaste
                      required
                      #NoOfRecuurence3="ngModel"
                      [ngClass]="{
                        'is-invalid': (f.submitted && NoOfRecuurence3.errors?.required) || NoOfRecuurence3.errors?.min
                      }"
                      [min]="1"
                      min="1"
                    />
                  </div>
                  <div class="col-xs-12 col-sm-6 col-md-6 dayselect">
                    <select
                      name="Period2"
                      [(ngModel)]="model.Period2"
                      #Period2="ngModel"
                      (change)="handlechangetrailperiods(Period2)"
                      [ngClass]="{
                        'is-invalid': (f.submitted && NoOfRecuurence3.errors?.required) || NoOfRecuurence3.errors?.min
                      }"
                    >
                      <option *ngFor="let option of recurrenceOption" [ngValue]="option.label"
                        >{{ option.label }}
                      </option>
                    </select>
                    <div *ngIf="f.submitted">
                      <div class="notifyMsg" [hidden]="!NoOfRecuurence3.errors?.required">Trial days required</div>
                    </div>
                    <div class="notifyMsg" *ngIf="NoOfRecuurence3.errors?.min">Needs to last at least 1 day</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-xs-12 col-sm-4 col-md-4">
            <!-- <img src="assets/images/Step3-Recurring.png" class="singleimg" /> -->
            <div class="mobileImg">
              <div class="textBody">
                <label *ngIf="data.productName" class="dynamicData">{{ data.productName }}</label> <br />
                <label *ngIf="data.billingModelName" class="dynamicData2">{{ data.billingModelName }}</label> <br />
                <label *ngIf="data.billModelDes" class="dynamicData3">{{ data.billModelDes }}</label> <br />
                <div class="data-info">
                  <table>
                    <tr>
                      <td><img class="img-size" src="assets/images/amount.svg" /></td>
                      <td>
                        Amount:
                        <a>
                          <span *ngIf="rupees.value == 'USD'">$</span> <span *ngIf="rupees.value == 'EUR'">€</span>
                          <span *ngIf="rupees.value == 'GBP'">£</span> <span *ngIf="rupees.value == 'JPY'">¥</span>
                          <span *ngIf="rupees.value == 'KRW'">₩</span>
                        </a>
                        {{ amountentry.value }}
                      </td>
                    </tr>
                    <hr />
                    <tr *ngIf="Toggle.value">
                      <td><img class="img-size" src="assets/images/period.svg" /></td>
                      <td>Trial Period: {{ model.NoOfRecuurence3 }} {{ model.Period2 }}</td>
                    </tr>
                    <hr *ngIf="Toggle.value" />
                    <tr>
                      <td><img class="img-size" src="assets/images/billingcycle.svg" /></td>
                      <td>Billing Cycle: {{ NoOfRecuurence1.value }} {{ Period1.value }}</td>
                    </tr>
                    <hr />
                    <tr>
                      <td><img class="img-size" src="assets/images/cycle.svg" /></td>
                      <td>Recurrences: {{ Indef.value == true ? 0 : NoOfRecuurence2.value }}</td>
                    </tr>
                  </table>
                </div>
              </div>
            </div>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-12">
            <button class="backbtn" (click)="onBack()">Back</button>
            <button type="submit" class="continuebtn">Continue</button>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>
